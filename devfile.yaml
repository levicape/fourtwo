schemaVersion: 2.0.0
metadata:
  name: fourtwo
components:
  - name: source
    container:
      image: public.ecr.aws/aws-mde/universal-image:4.0
      mountSources: true
      command:
        - sleep
        - infinity
commands:
  - id: update-node
    exec:
      component: source
      commandLine: sudo npx -y n 22
  - id: install-pnpm
    exec:
      component: source
      commandLine: npx -y corepack use pnpm@latest
  - id: start-docker
    exec:
      component: source
      commandLine: ./entrypoint.sh
events:
  postStart:
    - update-node
    - install-pnpm
    - start-docker

